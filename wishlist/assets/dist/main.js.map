{"version":3,"file":"main.js","sources":["../src/scripts/eventBus/index.js","../src/scripts/services/restApi.js","../src/scripts/messageHub/index.js","../src/scripts/core/index.js","../src/scripts/utils/clipboard.js","../src/scripts/wishlist/index.js","../src/scripts/compare/index.js","../src/scripts/dropdown/index.js","../src/scripts/main.js"],"sourcesContent":["const eventBus = function () {\n  let data = {}\n\n  return {\n    on: (events, callback) => {\n      events.split(' ').forEach(event => {\n        (data[event] = data[event] || []).push(callback)\n      })\n    },\n\n    off: (events, callback) => {\n      events.split(' ').forEach(event => {\n        data[event] = (data[event] || []).filter(i => i !== callback)\n      })\n    },\n\n    emit: (event, ...args) => {\n      (data[event] || []).forEach(callback => callback(...args))\n    },\n\n    destroy: () => data = {}\n  }\n}\n\nexport default eventBus\n","const restApi = (url, options = {}) => {\n  const restUrl = url\n  const config = options\n\n  const request = async (method, url, route, options = {}, body = null) => {\n    try {\n      url = route ? `${url}/${route}` : url\n      const init = {\n        method: method,\n        headers: new Headers({\n          'Content-Type': 'application/json',\n          'X-WP-Nonce': options.nonce\n        }),\n        body\n      }\n\n      const response = await fetch(url, init)\n\n      return await response.json()\n    } catch (e) {\n      throw new Error(e)\n    }\n  }\n\n  return {\n    get: async (route = null) => {\n      return await request('GET', restUrl, route, config)\n    },\n\n    post: async (route = null, body = null) => {\n      return await request('POST', restUrl, route, config, body)\n    },\n\n    delete: async (route = null, body = null) => {\n      return await request('DELETE', restUrl, route, config, body)\n    },\n\n    patch: async (route = null, body = null) => {\n      return await request('PATCH', restUrl, route, config, body)\n    }\n  }\n}\n\nexport default restApi\n","const defaults = {\n  classes: {\n    message: 'dcaw-message',\n    box: 'dcaw-messages-wrapper'\n  },\n  timeout: 4000,\n  max: 5\n}\n\nconst messageHub = function () {\n  let messageBox = document.querySelector(`.${defaults.classes.box}`)\n  let data = []\n\n  function findElement(element) {\n    return data.find(i => i.element === element)\n  }\n\n  function buildElement(str, type = 'success') {\n    const element = document.createElement('div')\n    element.classList.add(defaults.classes.message, `is-${type}`)\n    element.textContent = str\n\n    return element\n  }\n\n  function removeElement(element) {\n    let message = findElement(element)\n\n    clearTimeout(message.timeout)\n    messageBox.removeChild(message.element)\n    data = data.filter(i => i !== message)\n  }\n\n  function insertElement(element) {\n    let { timeout } = findElement(element)\n\n    messageBox.appendChild(element)\n\n    element.addEventListener('click', event => {\n      event.stopPropagation()\n      clearTimeout(timeout)\n      removeElement(element)\n    })\n\n    element.addEventListener('mouseover', () => {\n      clearTimeout(timeout)\n    })\n\n    element.addEventListener('mouseleave', () => {\n      timeout = elementTimeout(element)\n    })\n  }\n\n  function elementTimeout(element) {\n    return setTimeout(() => {\n      removeElement(element)\n    }, defaults.timeout)\n  }\n\n  function buildBox() {\n    messageBox = document.createElement('div')\n    messageBox.classList.add(defaults.classes.box)\n    document.body.appendChild(messageBox)\n  }\n\n  return {\n    show: (str, type) => {\n      if (!messageBox) buildBox()\n\n      let element = buildElement(str, type)\n      let timeout = elementTimeout(element)\n\n      if (data.length >= defaults.max) {\n        removeElement(data[0].element)\n      }\n\n      data.push({ element, timeout })\n      insertElement(element)\n    }\n  }\n}\n\nexport default messageHub\n","import eventBus from '../eventBus'\nimport restApi from '../services/restApi'\nimport messageHub from '../messageHub'\n\nclass Core {\n  #Event = eventBus()\n  #Message = messageHub()\n  #Options = {}\n  #Rest\n  #Store = []\n  #Counters = []\n  #Tables = []\n  #Name\n\n  constructor(name, options = {}) {\n    this.#Options = options\n    this.#Name = name\n\n    const { nonce, rest } = this.#Options\n    this.#Rest = restApi(rest + '/' + name, { nonce })\n  }\n\n  mount = () => {\n    this.#Rest.get()\n      .then(result => {\n        if (result.ok) {\n          this.#Store = result.data\n\n          this.initCounters()\n          this.initTables()\n          this.initEvents()\n\n          this.emit('mount')\n        }\n      })\n  }\n\n  initEvents() {\n    this.on('loading', this.onLoading)\n    this.on('max', this.onMaximum)\n    this.on('post-product', this.onPostProduct)\n    this.on('delete-product', this.onDeleteProduct)\n    this.on('mount', this.updateCounters)\n    this.on('updated', this.updateCounters)\n    this.on('updated', this.updateTables)\n\n    document.addEventListener('click', this.documentClickHandler)\n  }\n\n  onMaximum = result => {\n    this.show(result.message, 'info')\n  }\n\n  onDeleteProduct = result => {\n    this.show(result.message, 'info')\n  }\n\n  onPostProduct = result => {\n    this.show(result.message)\n  }\n\n  initCounters = () => {\n    const { selectors, classes } = this.#Options\n\n    document.querySelectorAll(selectors.counters).forEach(parent => {\n      const span = document.createElement('span')\n      span.classList.add(classes.counter, classes.empty)\n      this.#Counters.push(span)\n      parent.appendChild(span)\n    })\n  }\n\n  updateCounters = () => {\n    const length = this.#Store.reduce((acc, data) => {\n      if (data.products) {\n        return acc + data.products.length\n      }\n    }, 0)\n\n    const { classes: { empty } } = this.#Options\n\n    this.#Counters.forEach(counter => {\n      if (length) {\n        counter.textContent = length.toString()\n        counter.classList.remove(empty)\n      } else {\n        counter.classList.add(empty)\n        counter.textContent = ''\n      }\n    })\n  }\n\n  initTables = () => {\n    document.querySelectorAll(this.#Options.selectors.tables).forEach(table => {\n      this.#Tables.push(table)\n    })\n  }\n\n  updateTables = () => {\n    this.#Tables.forEach(async table => {\n      this.emit('loading', true, table)\n\n      const result = await this.rest.get('table')\n      table.innerHTML = result.data\n\n      this.emit('loading', false, table)\n    })\n  }\n\n  onLoading = (loading = true, elem = null) => {\n    if (elem instanceof Element) {\n      let method = loading ? 'add' : 'remove'\n      elem.classList[method](this.#Options.classes.loading)\n    }\n  }\n\n  documentClickHandler = async event => {\n    const { selectors: { button } } = this.#Options\n\n    if (event.target.closest(button)) {\n      event.preventDefault()\n\n      const { selectors: { button }, classes: { active } } = this.#Options\n\n      const $button = event.target.closest(button)\n      const productID = parseInt($button.dataset.id)\n\n      this.emit('loading', true, $button)\n\n      try {\n        let inStore = this.#Store.some(data => {\n          if (data.products && data.products.includes(productID)) {\n            return true\n          }\n        })\n\n        if (inStore) {\n          // stored product\n          $button.classList.remove(active)\n          await this.deleteProduct(productID)\n        } else {\n          // new product\n          await this.postProduct(productID)\n          $button.classList.add(active)\n        }\n      } catch (e) {\n        this.onError(e)\n      } finally {\n        this.emit('loading', false, $button)\n        this.emit('updated')\n      }\n    }\n  }\n\n  onError(error) {\n    if (error.code) {\n      this.emit(error.code, error)\n    }\n  }\n\n  postProduct = async (productID, body) => {\n    const result = await this.#Rest.post(`product/${productID}`, body)\n\n    if (result.ok) {\n      this.#Store = result.data\n      this.emit('post-product', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n\n  deleteProduct = async (productID, body) => {\n    const result = await this.#Rest.delete(`product/${productID}`, body)\n\n    if (result.ok) {\n      this.#Store = result.data\n      this.emit('delete-product', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n\n  on = (event, callback) => {\n    this.#Event.on(`${this.#Name}:${event}`, callback)\n\n    return this\n  }\n\n  off = (event, callback) => {\n    this.#Event.off(`${this.#Name}:${event}`, callback)\n\n    return this\n  }\n\n  emit = (event, ...args) => {\n    this.#Event.emit(`${this.#Name}:${event}`, ...args)\n\n    return this\n  }\n\n  destroy = (completely = true) => {\n    this.emit(`${this.#Name}:destroy`, completely)\n\n    this.#Event.destroy()\n\n    return this\n  }\n\n  show = (...args) => {\n    this.#Message.show(...args)\n  }\n\n  get options() {\n    return this.#Options\n  }\n\n  get rest() {\n    return this.#Rest\n  }\n\n  get store() {\n    return this.#Store\n  }\n\n  set store(value) {\n    this.#Store = value\n  }\n\n  get tables() {\n    return this.#Tables\n  }\n}\n\nexport default Core\n","export const copyToClipboard = str => {\n  const el = document.createElement('textarea')\n  el.value = str\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n","import Core from '../core'\nimport { copyToClipboard } from '../utils/clipboard'\n\nclass Wishlist extends Core {\n  #moveProducts = []\n\n  constructor(options = {}) {\n    super('wishlist', options)\n  }\n\n  initEvents() {\n    super.initEvents()\n\n    this.on('guest', this.onGuestClick)\n    this.on('shared-list', this.onShareList)\n    this.on('post-list', this.onPostList)\n    this.on('delete-list', this.onDeleteList)\n    this.on('patch-list', this.onPatchList)\n    this.on('loading', this.updateMovedProducts)\n\n    document.querySelectorAll(\n      this.options.selectors.createWishlist\n    ).forEach(item => {\n      item.addEventListener('click', this.createWishlistBtnHandler)\n    })\n\n    this.tables.forEach(table => {\n      table.addEventListener('click', this.tableClickHandler)\n      table.addEventListener('submit', this.tableSubmitHandler)\n      table.addEventListener('change', this.updateMovedProducts)\n    })\n  }\n\n  updateMovedProducts = () => {\n    this.tables.forEach(table => {\n      const checkboxs = table.querySelectorAll('input[name=\"move_products\"]')\n\n      this.#moveProducts = Array.from(checkboxs)\n        .filter(checkbox => checkbox.checked)\n        .map(checkbox => parseInt(checkbox.value))\n    })\n  }\n\n  tableSubmitHandler = async e => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n\n    switch (e.target.dataset.name) {\n    case 'edit_list':\n      await this.patchList(formData.get('id'), JSON.stringify({\n        id: formData.get('id'),\n        title: formData.get('title')\n      }))\n      break\n    case 'move_products':\n      if (this.#moveProducts.length) {\n        await this.patchList(formData.get('prev_list'), JSON.stringify({\n          // eslint-disable-next-line camelcase\n          prev_list: formData.get('prev_list'),\n          // eslint-disable-next-line camelcase\n          next_list: formData.get('next_list'),\n          products: this.#moveProducts\n        }))\n      } else {\n        return\n      }\n\n      break\n    }\n\n    this.emit('updated')\n  }\n\n  tableClickHandler = async e => {\n    if (e.target.closest('[data-action]')) {\n      e.preventDefault()\n\n      await this.buttonActions(e.target.closest('[data-action]'))\n    }\n\n    if (e.target.closest(this.options.selectors.remove)) {\n      e.preventDefault()\n\n      await this.removeProductBtn(\n        e.target.closest(this.options.selectors.remove)\n      )\n    }\n  }\n\n  buttonActions = async button => {\n    const id = button.dataset.id\n    const action = button.dataset.action\n\n    this.emit('loading', true, button)\n\n    try {\n      switch (action) {\n      case 'delete':\n        await this.deleteList(id)\n        break\n      case 'default':\n        await this.patchList(id, JSON.stringify({\n          default: true\n        }))\n        break\n      case 'share':\n        await this.shareList(id)\n        break\n      }\n    } catch (e) {\n      super.onError(e)\n    } finally {\n      this.emit('loading', false, button)\n      this.emit('updated')\n    }\n  }\n\n  removeProductBtn = async button => {\n    const productID = parseInt(button.dataset.id)\n    const listID = button.dataset.listId\n\n    this.emit('loading', true, button)\n\n    try {\n      await this.deleteProduct(productID, JSON.stringify({\n        // eslint-disable-next-line camelcase\n        list_id: listID\n      }))\n    } catch (e) {\n      this.onError(e)\n    } finally {\n      this.emit('loading', false, button)\n      this.emit('updated')\n    }\n  }\n\n  createWishlistBtnHandler = async e => {\n    e.preventDefault()\n\n    const button = e.currentTarget\n\n    this.emit('loading', true, button)\n\n    try {\n      await this.createList()\n    } catch (e) {\n      super.onError(e)\n    } finally {\n      this.emit('loading', false, button)\n      this.emit('updated')\n    }\n  }\n\n  shareList = async id => {\n    const result = await this.rest.get(`list/share/${id}`)\n\n    if (result.ok) {\n      this.emit('shared-list', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n\n  createList = async () => {\n    const result = await this.rest.post('list')\n\n    if (result.ok) {\n      this.store = result.data\n      this.emit('post-list', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n\n  patchList = async (id, body) => {\n    const result = await this.rest.patch(`list/${id}`, body)\n\n    if (result.ok) {\n      this.store = result.data\n      this.emit('patch-list', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n\n  deleteList = async id => {\n    const result = await this.rest.delete(`list/${id}`)\n\n    if (result.ok) {\n      this.store = result.data\n      this.emit('delete-list', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n\n  onGuestClick = result => {\n    this.show(result.message)\n    window.location.href = this.options.accountLink\n  }\n\n  onShareList = result => {\n    copyToClipboard(result.data)\n    this.show(result.message)\n  }\n\n  onPostList = result => {\n    this.show(result.message)\n  }\n\n  onDeleteList = result => {\n    this.show(result.message, 'warning')\n  }\n\n  onPatchList = result => {\n    this.show(result.message, 'info')\n  }\n}\n\nexport default Wishlist\n","import Core from '../core'\n\nclass Compare extends Core {\n\n  constructor(options = {}) {\n    super('compare', options)\n  }\n\n  initEvents() {\n    super.initEvents()\n\n    this.tables.forEach(table => {\n      table.addEventListener('click', this.tableClickHandler)\n    })\n  }\n\n  tableClickHandler = async e => {\n    if (e.target.closest('[data-action=\"clear\"]')) {\n      e.preventDefault()\n\n      const button = e.target.closest('[data-action=\"clear\"]')\n\n      this.emit('loading', true, button)\n\n      try {\n        await this.clearCompare()\n      } catch (e) {\n        super.onError(e)\n      } finally {\n        this.emit('loading', false, button)\n        this.emit('updated')\n      }\n    }\n\n    if (e.target.closest(this.options.selectors.remove)) {\n      e.preventDefault()\n\n      const button = e.target.closest(this.options.selectors.remove)\n      const productID = parseInt(button.dataset.id)\n\n      this.emit('loading', true, button)\n\n      try {\n        await this.deleteProduct(productID)\n      } catch (e) {\n        this.onError(e)\n      } finally {\n        this.emit('loading', false, button)\n        this.emit('updated')\n      }\n    }\n\n    if (e.target.closest(this.options.selectors.collapse)) {\n      e.preventDefault()\n\n      e.target.closest(this.options.selectors.collapse)\n        .parentNode\n        .classList\n        .toggle(this.options.classes.collapse)\n    }\n  }\n\n  clearCompare = async () => {\n    const result = await this.rest.delete()\n\n    if (result.ok) {\n      this.store = result.data\n      this.emit('cleared', result)\n    } else {\n      throw result\n    }\n\n    return result\n  }\n}\n\nexport default Compare\n","const config = {\n  active: 'is-active',\n  target: '.js-dcaw-dropdown'\n}\n\nconst dropdown = function () {\n  let isClose = true\n  let toggle\n  let parent\n\n  const closeHandler = e => {\n    if (!isClose && !parent.contains(e.target)) {\n      parent.classList.remove(config.active)\n      isClose = true\n      document.removeEventListener('click', closeHandler, true)\n    }\n  }\n\n  const clickHandler = e => {\n    toggle = e.target.closest(config.target)\n\n    if (toggle) {\n      e.preventDefault()\n      e.stopPropagation()\n\n      parent = toggle.parentNode\n\n      if (parent.classList.contains(config.active)) {\n        parent.classList.remove(config.active)\n        isClose = true\n      } else {\n        parent.classList.add(config.active)\n        isClose = false\n        document.addEventListener('click', closeHandler, true)\n      }\n    }\n  }\n\n  return {\n    mount: () => {\n      document.addEventListener('click', clickHandler)\n    }\n  }\n}()\n\nexport default dropdown\n","/**\n * Run scripts on document ready\n */\n\n/* global dcawCompare */\n/* global dcawWishlist */\n/* global dcawGeneral */\n\nimport Wishlist from './wishlist'\nimport Compare from './compare'\nimport dropdown from './dropdown'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  dropdown.mount()\n\n  if (typeof dcawCompare === 'object' && typeof dcawGeneral === 'object') {\n    const compare = new Compare({ ...dcawGeneral, ...dcawCompare })\n\n    compare.mount()\n  }\n\n  if (typeof dcawWishlist === 'object' && typeof dcawGeneral === 'object') {\n    const wishlist = new Wishlist({ ...dcawGeneral, ...dcawWishlist })\n\n    wishlist.mount()\n  }\n\n})\n"],"names":["eventBus","data","on","events","callback","split","forEach","event","push","off","filter","i","emit","args","destroy","restApi","url","options","restUrl","config","request","method","route","body","init","headers","Headers","nonce","response","fetch","json","e","Error","get","post","delete","patch","defaults","classes","message","box","timeout","max","messageHub","messageBox","document","querySelector","findElement","element","find","buildElement","str","type","createElement","classList","add","textContent","removeElement","clearTimeout","removeChild","insertElement","appendChild","addEventListener","stopPropagation","elementTimeout","setTimeout","buildBox","show","length","Core","constructor","name","then","result","ok","initCounters","initTables","initEvents","selectors","querySelectorAll","counters","parent","span","counter","empty","reduce","acc","products","toString","remove","tables","table","rest","innerHTML","loading","elem","Element","button","target","closest","preventDefault","active","$button","productID","parseInt","dataset","id","inStore","some","includes","deleteProduct","postProduct","onError","completely","onLoading","onMaximum","onPostProduct","onDeleteProduct","updateCounters","updateTables","documentClickHandler","error","code","store","value","copyToClipboard","el","select","execCommand","Wishlist","checkboxs","Array","from","checkbox","checked","map","formData","FormData","patchList","JSON","stringify","title","prev_list","next_list","buttonActions","removeProductBtn","action","deleteList","default","shareList","listID","listId","list_id","currentTarget","createList","window","location","href","accountLink","onGuestClick","onShareList","onPostList","onDeleteList","onPatchList","updateMovedProducts","createWishlist","item","createWishlistBtnHandler","tableClickHandler","tableSubmitHandler","Compare","clearCompare","collapse","parentNode","toggle","dropdown","isClose","closeHandler","contains","removeEventListener","clickHandler","mount","dcawCompare","dcawGeneral","compare","dcawWishlist","wishlist"],"mappings":"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"}